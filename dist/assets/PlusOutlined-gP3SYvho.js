import{N as Y,H as G,I as J}from"./index-DBy6f6Xv.js";import{r as p,H as Q,P as q,ay as $,e as r,at as V,b as j}from"./index-CAiBCleG.js";const{ESC:U,TAB:Z}=Y;function ee({visible:e,triggerRef:o,onVisibleChange:t,autoFocus:n,overlayRef:l}){const s=p.useRef(!1),c=()=>{e&&(o.current?.focus?.(),t?.(!1))},i=()=>l.current?.focus?(l.current.focus(),s.current=!0,!0):!1,d=m=>{switch(m.keyCode){case U:c();break;case Z:{let g=!1;s.current||(g=i()),g?m.preventDefault():c();break}}};p.useEffect(()=>e?(window.addEventListener("keydown",d),n&&Q(i,3),()=>{window.removeEventListener("keydown",d),s.current=!1}):()=>{s.current=!1},[e])}const te=p.forwardRef((e,o)=>{const{overlay:t,arrow:n,prefixCls:l}=e,s=p.useMemo(()=>{let i;return typeof t=="function"?i=t():i=t,i},[t]),c=q(o,$(s));return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:`${l}-arrow`}),r.cloneElement(s,{ref:V(s)?c:void 0}))}),f={adjustX:1,adjustY:1},u=[0,0],ne={topLeft:{points:["bl","tl"],overflow:f,offset:[0,-4],targetOffset:u},top:{points:["bc","tc"],overflow:f,offset:[0,-4],targetOffset:u},topRight:{points:["br","tr"],overflow:f,offset:[0,-4],targetOffset:u},bottomLeft:{points:["tl","bl"],overflow:f,offset:[0,4],targetOffset:u},bottom:{points:["tc","bc"],overflow:f,offset:[0,4],targetOffset:u},bottomRight:{points:["tr","br"],overflow:f,offset:[0,4],targetOffset:u}};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},y.apply(this,arguments)}const ie=r.forwardRef((e,o)=>{const{arrow:t=!1,prefixCls:n="rc-dropdown",transitionName:l,animation:s,align:c,placement:i="bottomLeft",placements:d=ne,getPopupContainer:m,showAction:g,hideAction:L,overlayClassName:T,overlayStyle:k,visible:H,trigger:C=["hover"],autoFocus:D,overlay:O,children:h,onVisibleChange:I,...S}=e,[W,E]=r.useState(),b="visible"in e?H:W,F=s?`${n}-${s}`:l,M=r.useRef(null),N=r.useRef(null),P=r.useRef(null);r.useImperativeHandle(o,()=>M.current);const x=a=>{E(a),I?.(a)};ee({visible:b,triggerRef:P,onVisibleChange:x,autoFocus:D,overlayRef:N});const z=a=>{const{onOverlayClick:v}=e;E(!1),v&&v(a)},A=()=>r.createElement(te,{ref:N,overlay:O,prefixCls:n,arrow:t}),B=()=>typeof O=="function"?A:A(),K=()=>{const{minOverlayWidthMatchTrigger:a,alignPoint:v}=e;return"minOverlayWidthMatchTrigger"in e?a:!v},_=()=>{const{openClassName:a}=e;return a!==void 0?a:`${n}-open`},X=r.cloneElement(h,{className:j(h.props?.className,b&&_()),ref:V(h)?q(P,$(h)):void 0});let w=L;return!w&&C.indexOf("contextMenu")!==-1&&(w=["click"]),r.createElement(G,y({builtinPlacements:d},S,{prefixCls:n,ref:M,popupClassName:j(T,{[`${n}-show-arrow`]:t}),popupStyle:k,action:C,showAction:g,hideAction:w,popupPlacement:i,popupAlign:c,popupMotion:{motionName:F},popupVisible:b,stretch:K()?"minWidth":"",popup:B(),onOpenChange:x,onPopupClick:z,getPopupContainer:m}),X)});var oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function R(){return R=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},R.apply(this,arguments)}const re=(e,o)=>p.createElement(J,R({},e,{ref:o,icon:oe})),le=p.forwardRef(re);export{ie as D,oe as P,le as R};
