import{r as d,j as t}from"./index-DRYYJggy.js";import{F as n,I as c,B as k,s as M}from"./index-DQU_F6Fm.js";import{F as b,T as D}from"./Table-6zcBRtZI.js";import{M as I}from"./index-DayXL3Em.js";import"./index-Bj386uoF.js";import"./PlusOutlined-CDU51U6T.js";import"./index-BBcq28iL.js";import"./index-B74T4Ixe.js";import"./EllipsisOutlined-BVGyxfd1.js";import"./CloseOutlined-BqKTODZs.js";import"./context-Bi0jcZUX.js";const W=()=>{const[p,l]=d.useState(!1),[r]=n.useForm(),[g,h]=d.useState(""),x=()=>{const e=new Date,a=e.getFullYear(),o=e.getMonth()+1,i=[];for(let s=-3;s<=12;s++){const m=new Date(a,o-1+s,1),u=m.getFullYear(),y=m.getMonth()+1;i.push({key:`${u}-${y}`,year:u,month:y,workdays:22,holidayDays:0,lastModified:""})}return i},[f,j]=d.useState(x),w=e=>{h(e.key),r.setFieldsValue({year:e.year,month:e.month,workdays:e.workdays,holidayDays:e.holidayDays}),l(!0)},S=async()=>{try{await r.validateFields();const e=r.getFieldsValue(),a=new Date,o=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`;j(i=>i.map(s=>s.key===g?{...s,...e,lastModified:o}:s)),M.success("修改成功"),l(!1),r.resetFields(),h("")}catch(e){console.error("Validation failed:",e)}},F=[{title:"时间（月）",dataIndex:"month",width:150,render:(e,a)=>`${a.year}年${a.month}月`},{title:"当月工作日",dataIndex:"workdays",width:150,render:e=>t.jsxs("span",{style:{fontWeight:600},children:[e,"天"]})},{title:"节假日",dataIndex:"holidayDays",width:150,render:e=>t.jsxs("span",{style:{color:"#ff4d4f",fontWeight:600},children:[e,"天"]})},{title:"最后修改时间",dataIndex:"lastModified",width:180,render:e=>e||t.jsx("span",{style:{color:"#999"},children:"-"})},{title:"操作",width:100,render:(e,a)=>t.jsx(k,{type:"link",size:"small",onClick:()=>w(a),children:"修改"},"edit")}];return t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:t.jsx("h2",{style:{fontSize:"20px",fontWeight:600,margin:0},children:"节假日设置"})}),t.jsx(b,{columns:F,dataSource:f,rowKey:"key",pagination:{defaultPageSize:10,showSizeChanger:!0},scroll:{x:900}}),t.jsx(I,{title:"修改节假日",open:p,onOk:S,onCancel:()=>{l(!1),r.resetFields()},width:700,children:t.jsxs(n,{form:r,layout:"vertical",children:[t.jsx(n.Item,{name:"year",label:"年份",rules:[{required:!0,message:"请输入年份"}],children:t.jsx(c,{type:"number",placeholder:"请输入年份"})}),t.jsx(n.Item,{name:"month",label:"月份",rules:[{required:!0,message:"请输入月份"}],children:t.jsx(c,{type:"number",placeholder:"请输入月份"})}),t.jsx(n.Item,{name:"workdays",label:"当月工作日",rules:[{required:!0,message:"请输入工作日天数"}],children:t.jsx(c,{type:"number",placeholder:"请输入工作日天数"})}),t.jsx(n.Item,{name:"holidayDays",label:"节假日",rules:[{required:!0,message:"请输入节假日天数"}],children:t.jsx(D,{min:0,step:1,style:{width:"100%"},placeholder:"请输入节假日天数"})})]})})]})};export{W as default};
